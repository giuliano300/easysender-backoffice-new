<mat-card class="trinta-card mb-25 bg-white border-none d-block">
  <mat-dialog-content class="scrollable-content" [formGroup]="form">
    <h1 mat-dialog-title class="bg-grey">Modifica invio - {{data.type}} {{data.ar}}</h1>

    <!-- Sezione Riepilogo -->
    <mat-card class="mb-3 bg-white">
      <mat-card-content>
        <div class="container">
          <div class="row">
            <div class="col-lg-4">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="map-pin"></i-feather>
                <mat-label>Id</mat-label>
                <input matInput formControlName="id">
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="calendar"></i-feather>
                <mat-label>Data</mat-label>
                <input matInput type="text" formControlName="insertDate">
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="user"></i-feather>
                <mat-label>Utente</mat-label>
                <input matInput formControlName="userComplete">
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-8">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="map-pin"></i-feather>
                <mat-label>Id Richiesta</mat-label>
                <input matInput formControlName="requestId">
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="file-text"></i-feather>
                <mat-label>Stato corrente</mat-label>
                <input matInput formControlName="currentState">
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="file-text"></i-feather>
                <mat-label>Messaggio</mat-label>
                <textarea matInput formControlName="stato"></textarea>
              </mat-form-field>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Sezione Mittente -->
    <h2 mat-dialog-title class="bg-grey">Mittente</h2>
    <mat-card class="mb-3 bg-white">
      <mat-card-content>
        <div class="container">
          <div class="row">
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="user"></i-feather>
                <mat-label>Nominativo</mat-label>
                <input matInput formControlName="sender">
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="user"></i-feather>
                <mat-label>Completamento Nominativo</mat-label>
                <input matInput formControlName="complementNameSender">
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="map-pin"></i-feather>
                <mat-label>Indirizzo</mat-label>
                <input matInput formControlName="addressSender">
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="map-pin"></i-feather>
                <mat-label>Completamento Indirizzo</mat-label>
                <input matInput formControlName="complementAddressSender">
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-4" *ngFor="let field of ['zipCodeSender', 'citySender', 'stateSender']">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather [name]="fieldIcons[field]"></i-feather>
                <mat-label>{{ fieldLabels[field] }}</mat-label>
                <input matInput [formControlName]="field">
              </mat-form-field>
            </div>          
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Sezione Destinatario AR -->
    <span *ngIf="data.arBool">
      <h2 mat-dialog-title class="bg-grey">Destinatario ricevuta di ritorno</h2>
      <mat-card class="mb-3 bg-white">
        <mat-card-content>
          <div class="container">
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field appearance="fill" class="w-100">
                  <i-feather name="user"></i-feather>
                  <mat-label>Nominativo AR</mat-label>
                  <input matInput formControlName="senderAR">
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <mat-form-field appearance="fill" class="w-100">
                  <i-feather name="user"></i-feather>
                  <mat-label>Completamento Nominativo AR</mat-label>
                  <input matInput formControlName="complementNameSenderAR">
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <mat-form-field appearance="fill" class="w-100">
                  <i-feather name="map-pin"></i-feather>
                  <mat-label>Indirizzo AR</mat-label>
                  <input matInput formControlName="addressSenderAR">
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <mat-form-field appearance="fill" class="w-100">
                  <i-feather name="map-pin"></i-feather>
                  <mat-label>Completamento Indirizzo AR</mat-label>
                  <input matInput formControlName="complementAddressSenderAR">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4" *ngFor="let field of ['zipCodeSenderAR', 'citySenderAR', 'stateSenderAR']">
                <mat-form-field appearance="fill" class="w-100">
                  <i-feather [name]="fieldIcons[field]"></i-feather>
                  <mat-label>{{ fieldLabels[field] }}</mat-label>
                  <input matInput [formControlName]="field">
                </mat-form-field>
              </div>          
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </span>

    <!-- Sezione Spedizione -->
    <h2 mat-dialog-title class="bg-grey">Destinatario</h2>
    <mat-card class="mb-3 bg-white">
      <mat-card-content>
        <div class="container">
          <div class="row">
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="user"></i-feather>
                <mat-label>Nominativo</mat-label>
                  <input matInput formControlName="recipient">
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="user"></i-feather>
                <mat-label>Completamento Nominativo</mat-label>
                  <input matInput formControlName="complementName">
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="map-pin"></i-feather>
                <mat-label>Indirizzo</mat-label>
                <input matInput formControlName="address">
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather name="map-pin"></i-feather>
                <mat-label>Completamento Indirizzo</mat-label>
                <input matInput formControlName="complementAddress">
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-4" *ngFor="let field of ['zipCode', 'city', 'state']">
              <mat-form-field appearance="fill" class="w-100">
                <i-feather [name]="fieldIcons[field]"></i-feather>
                  <mat-label>{{ fieldLabels[field] }}</mat-label>
                <input matInput [formControlName]="field">
              </mat-form-field>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Sezione File -->
    <h2 mat-dialog-title class="bg-grey">File della spedizione</h2>
    <mat-card class="bg-white">
      <mat-card-content>
        <div class="container">
          <div class="row">
            <div class="col-lg-6">
              <mat-form-field appearance="fill" class="w-100" (click)="downloadFile(data, 'file')">
                <i-feather name="file-text" class="cursor-pointer"></i-feather>
                <mat-label>Nome del file</mat-label>
                <input matInput formControlName="fileName">
              </mat-form-field>
            </div>

            <div class="col-lg-6">
              <label class="mat-label">Carica nuovo file</label><br>
              <input type="file" (change)="onFileSelected($event)" class="form-control">
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </mat-dialog-content>
</mat-card>
<mat-dialog-actions align="end" class="mt-3">
  <button class="btn close-button" (click)="onCancel()">Chiudi</button>
  <button type="submit" class="btn confirm-button" [disabled]="form.invalid" (click)="onSave()">Salva</button>
</mat-dialog-actions>
